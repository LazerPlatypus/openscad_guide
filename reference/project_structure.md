# Project Structure - Quick Reference

**Last Updated:** 2026-02-15
**Status:** Draft
**Why this structure?** See [Explanation](../explanation/why_these_conventions.md#project-structure)

---

## Standard Project Layout

For design projects (creating specific parts/assemblies):

```
project_name/
├── README.md                    # Project overview
├── Makefile                     # Build automation
├── .gitignore                   # Git ignore patterns
├── .openscad_docsgen_rc         # Documentation config (optional)
├── config.scad                  # Project-wide settings
│
├── models/                      # Source .scad files
│   ├── part_one.scad
│   ├── part_two.scad
│   └── consts.scad              # Shared constants
│
├── previews/                    # Views of assemblies
│   ├── assembly_view_one.scad
│   └── assembly_view_two.scad
│
├── deps/                        # Dependencies (submodules, libraries)
│   ├── coord_kit/
│   ├── BOSL2/
│   └── custom_lib/
│
├── examples/                    # Usage examples (optional)
│   ├── example_assembly.scad
│   └── example_variant.scad
│
├── tests/                       # Visual tests (optional)
│   ├── test_part_one.scad
│   └── test_fit.scad
│
├── scripts/                     # Build scripts
│   ├── export_stl.sh
│   ├── render_images.sh
│   └── generate_docs.sh
│
├── build/                       # Generated files (gitignored)
│   ├── stl/
│   │   ├── part_one.stl
│   │   └── part_two.stl
│   └── images/
│       ├── assembly.png
│       └── part_one.png
│
└── docs/                        # Documentation
    ├── README.md                # Documentation index
    ├── assembly.md              # Assembly instructions
    └── bom.md                   # Bill of materials
```

---

## Standard Library Layout

For reusable libraries:

```
library_name/
├── README.md                    # Library overview
├── LICENSE                      # License file
├── CHANGELOG.md                 # Version history
├── Makefile                     # Build automation
├── .gitignore                   # Git ignore patterns
├── .openscad_docsgen_rc         # Documentation config
│
├── core.scad                    # Main entry point (includes all)
│
├── src/                         # Library source files
│   ├── module_one.scad
│   ├── module_two.scad
│   └── constants.scad           # Library constants
│
├── deps/                        # Vendored dependencies
│   └── external_lib/
│
├── examples/                    # Usage examples
│   ├── README.md
│   ├── basic_usage.scad
│   └── advanced_usage.scad
│
├── tests/                       # Test files
│   ├── test_module_one.scad
│   └── test_module_two.scad
│
├── scripts/                     # Build/utility scripts
│   ├── setup.sh
│   ├── generate_docs.sh
│   ├── render_images.sh
│   └── run_tests.sh
│
├── build/                       # Generated files (gitignored)
│   ├── examples/
│   └── tests/
│
└── docs/                        # Generated documentation
    └── src/                     # Generated by openscad_docsgen
```

---

## Directory Details

### Root Files

**README.md**
- Project/library overview
- Installation instructions
- Quick start guide
- License summary

**Makefile**
- Build automation interface
- Calls scripts for actual logic
- Standard targets: `all`, `docs`, `images`, `test`, `clean`, `help`

**.gitignore**
- Ignore `build/` directory
- Ignore `.venv/` if using Python tools
- Ignore OS files (`.DS_Store`, `Thumbs.db`)

**.openscad_docsgen_rc** *(libraries only)*
- Configuration for documentation generation
- Specifies output directory, project name
- See [Documentation Reference](documentation.md#configuration)

**config.scad** *(projects only)*
- Project-wide constants and settings
- Export mode flags
- Rendering quality settings

---

### models/ (Projects)

**Purpose:** Source `.scad` files for project parts

**Contents:**
- One file per part: `base_plate.scad`, `lid.scad`
- Assembly files: `assembly.scad`
- Shared constants: `consts.scad`

**Rules:**
- Files should be directly openable in OpenSCAD
- Each file renders when opened (for preview)
- Use `config.scad` for shared settings

**Example part file:**
```scad
// File: models/base_plate.scad
// Description:
//   Base plate for the enclosure.
// Includes:
//   include <project_name/models/base_plate.scad>

include <../config.scad>
include <consts.scad>

module base_plate(
    width = BASE_WIDTH,
    height = BASE_HEIGHT
) {
    // ... implementation
}

// Render when opened directly
base_plate();
```

---

### src/ (Libraries)

**Purpose:** Library source modules

**Contents:**
- One file per module/group of related functions
- Organized by functionality
- Constants file for library-wide values

**Rules:**
- All files documented with openscad_docsgen format
- Public API comes before private helpers
- No rendering code in library files

**Example library file:**
```scad
// LibFile: circles.scad
// Description:
//   Circle and arc generation functions.
// Includes:
//   include <library_name/src/circles.scad>

// Function: make_circle_points()
// Usage:
//   points = make_circle_points(radius, segments);
// Description:
//   Generates points for a circle.
// Arguments:
//   radius = Circle radius
//   ---
//   segments = Number of segments. Default: 32
// Example:
//   points = make_circle_points(10);
//   polygon(points);
function make_circle_points(radius, segments=32) = ...;
```

---

### deps/

**Purpose:** External dependencies (libraries, submodules)

**Contents:**
- Git submodules: `deps/BOSL2/`, `deps/coord_kit/`
- Vendored dependencies
- Third-party tools

**Usage:**
```scad
include <deps/coord_kit/core.scad>
include <deps/BOSL2/std.scad>
```

**Management:**
```bash
# Add dependency
git submodule add https://github.com/user/lib.git deps/lib

# Update dependencies
git submodule update --init --recursive
```

**See:** [Why deps/ not lib/?](../explanation/why_these_conventions.md#project-structure)

---

### examples/

**Purpose:** Demonstrate how to use the code

**Contents:**
- Complete, runnable examples
- Show common use cases
- Include comments explaining what's happening

**Rules:**
- Files should be self-contained
- Include rendered images in `build/examples/`
- Reference real use cases, not toy examples

**Example:**
```scad
// Example: Basic bracket assembly
// Shows how to create a simple mounting bracket

include <deps/coord_kit/core.scad>

// Configuration
bracket_width = 50;
bracket_height = 30;

// Create bracket
module bracket() {
    difference() {
        rounded_rect(bracket_width, bracket_height, radius=2);
        mounting_holes(spacing=40, diameter=5);
    }
}

bracket();
```

---

### tests/

**Purpose:** Validate functionality

**Contents:**
- Visual tests (render and compare)
- Assertion-based tests
- Edge case validation

**Naming:**
- `test_*.scad` pattern
- Descriptive names: `test_circle_generation.scad`

**Example:**
```scad
// Test: Circle point generation

include <../src/circles.scad>

// Test 1: Default segments
points = make_circle_points(10);
assert(len(points) == 32, "Expected 32 points");

// Test 2: Custom segments
points_custom = make_circle_points(10, segments=64);
assert(len(points_custom) == 64, "Expected 64 points");

// Visual verification
polygon(points);
```

---

### scripts/

**Purpose:** Build and automation scripts

**Common scripts:**
- `setup.sh` - Environment setup (venv, dependencies)
- `generate_docs.sh` - Run openscad_docsgen
- `render_images.sh` - Render examples/tests
- `run_tests.sh` - Run test suite
- `export_stl.sh` *(projects)* - Export STL files

**See:** [Why separate scripts?](../explanation/why_these_conventions.md#project-structure)

---

### build/ (gitignored)

**Purpose:** Generated/rendered files

**Contents:**
- Rendered images: `build/examples/`, `build/tests/`
- Exported STL files: `build/stl/` *(projects)*
- Temporary files

**Rules:**
- Always in `.gitignore`
- Recreated with `make` commands
- Don't commit generated files (exception: may include STL in release archives)

**See:** [Why gitignore build/?](../explanation/why_these_conventions.md#project-structure)

---

### docs/

**Purpose:** Documentation (hand-written or generated)

**For libraries:**
- Generated API docs: `docs/src/` (from openscad_docsgen)
- Hand-written guides: `docs/guide.md`

**For projects:**
- Assembly instructions: `docs/assembly.md`
- Bill of materials: `docs/bom.md`
- Design notes: `docs/design.md`

**Generated vs hand-written:**
- `docs/src/` or `docs/api/` is generated (don't edit manually)
- Other files are hand-written
- Run `make docs` to regenerate

**See:** [Why both types in docs/?](../explanation/why_these_conventions.md#project-structure)

---

## Project vs Library

### Use Project Structure When:
- Creating specific physical objects
- Parts will be exported to STL
- Design is the goal, not reusability
- Parameters tuned to specific use case

**Example:** Hockey puck display, phone mount, enclosure

### Use Library Structure When:
- Creating reusable functions/modules
- Code will be used in multiple projects
- Abstraction and API are important
- Will be included by other files

**Example:** coord_kit, geometry utilities, hardware generators

---

## .gitignore Template

**For projects:**
```gitignore
# Build artifacts
build/

# Python venv
.venv/
__pycache__/

# OS files
.DS_Store
Thumbs.db

# OpenSCAD temp
*.gch
*.bak
```

**For libraries:**
```gitignore
# Build artifacts
build/

# Python venv
.venv/
__pycache__/

# Generated docs
docs/src/

# OS files
.DS_Store
Thumbs.db

# OpenSCAD temp
*.gch
*.bak
```

---

## Quick Checklist

**New project:**
- [ ] README.md with overview and quick start
- [ ] Makefile for build automation
- [ ] .gitignore excluding build/
- [ ] config.scad for shared settings
- [ ] models/ for part files
- [ ] deps/ for dependencies (use submodules)
- [ ] scripts/ for build scripts

**New library:**
- [ ] README.md with API overview
- [ ] LICENSE file
- [ ] CHANGELOG.md
- [ ] Makefile for build automation
- [ ] .gitignore excluding build/ and docs/
- [ ] .openscad_docsgen_rc for documentation
- [ ] core.scad as entry point
- [ ] src/ for library modules
- [ ] examples/ with usage examples
- [ ] tests/ for validation
- [ ] scripts/ for build scripts

---

## Next Steps

- See [Library Structure](../how_to/create_library.md) *(coming soon)* for detailed library setup
- See [Project Structure](../how_to/create_project.md) *(coming soon)* for detailed project setup
- See [File Organization](file_organization.md) for organizing code within files
- See [Why These Conventions](../explanation/why_these_conventions.md#project-structure) for rationale
